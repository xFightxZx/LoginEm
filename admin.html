<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - ‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏á‡∏≤‡∏ô</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(30, 41, 59, 0.5);
            backdrop-filter: blur(10px);
            border: 1px solid #334155;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
        }

        .stat-card h3 {
            color: #94a3b8;
            font-size: 0.9rem;
            margin-bottom: 10px;
        }

        .stat-card .number {
            color: #22d3ee;
            font-size: 2rem;
            font-weight: bold;
        }

        .export-section {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .btn-export {
            background: linear-gradient(to right, #10b981, #059669);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .btn-export:hover {
            opacity: 0.9;
        }

        .action-column {
            display: flex;
            gap: 5px;
        }

        .btn-action {
            padding: 5px 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.8rem;
        }

        .btn-edit {
            background: #3b82f6;
            color: white;
        }

        .btn-delete {
            background: #ef4444;
            color: white;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: #1e293b;
            border: 1px solid #334155;
            border-radius: 20px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
        }

        .modal-content h2 {
            margin-bottom: 20px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }
    </style>
</head>
<body>
    <!-- Admin View -->
    <div id="adminView" class="container">
        <div class="header">
            <h1>üîê Admin - ‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏á‡∏≤‡∏ô</h1>
            <div class="time-display" id="adminTime">00:00:00</div>
            <div class="date-display" id="adminDate">-</div>
            <div style="margin-top:15px">
                <span style="color:#94a3b8">‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ, </span>
                <span style="color:#22d3ee;font-weight:600" id="adminName">-</span>
                <button onclick="logout()" class="logout-btn" style="margin-left:15px">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
                <a href="index.html" class="logout-btn" style="display:inline-block;text-decoration:none;margin-left:10px">‡∏´‡∏ô‡πâ‡∏≤‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏ß‡∏•‡∏≤</a>
            </div>
        </div>

        <!-- Stats Cards -->
        <div class="stats-grid">
            <div class="stat-card">
                <h3>‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
                <div class="number" id="totalEmployees">0</div>
            </div>
            <div class="stat-card">
                <h3>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</h3>
                <div class="number" id="todayRecords">0</div>
            </div>
            <div class="stat-card">
                <h3>‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏£‡∏ß‡∏° (‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ)</h3>
                <div class="number" id="monthlyHours">0</div>
            </div>
            <div class="stat-card">
                <h3>‡∏•‡∏≤‡πÉ‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ</h3>
                <div class="number" id="monthlyLeaves">0</div>
            </div>
        </div>

        <!-- Main Panel -->
        <div class="panel">
            <div class="admin-header">
                <div class="panel-header">
                    <span>üìä</span>
                    <h2>‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏ß‡∏•‡∏≤</h2>
                </div>
                <div class="export-section">
                    <button class="btn-export" onclick="exportToCSV()">üì• Export CSV</button>
                </div>
            </div>

            <!-- Filters -->
            <div class="filter-section">
                <label>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô:</label>
                <select id="employeeFilter">
                    <option value="">‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô</option>
                </select>
                <label style="margin-left:15px">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏î‡∏∑‡∏≠‡∏ô:</label>
                <input type="month" id="monthFilter">
                <button onclick="applyFilters()">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</button>
                <button onclick="clearFilter()">‡∏•‡πâ‡∏≤‡∏á</button>
                <span class="total-hours">‡∏£‡∏ß‡∏°‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á: <span id="totalHours">0.00 ‡∏ä‡∏°.</span></span>
            </div>

            <!-- Table -->
            <div style="overflow-x:auto;margin-top:20px">
                <table id="recordsTable">
                    <thead>
                        <tr>
                            <th>‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</th>
                            <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
                            <th>‡πÄ‡∏Ç‡πâ‡∏≤</th>
                            <th>‡∏≠‡∏≠‡∏Å</th>
                            <th>‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏û‡∏±‡∏Å</th>
                            <th>‡∏à‡∏ö‡∏û‡∏±‡∏Å</th>
                            <th>‡∏´‡∏±‡∏Å (‡∏ä‡∏°.)</th>
                            <th>‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏£‡∏ß‡∏°</th>
                            <th>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</th>
                            <th>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                        </tr>
                    </thead>
                    <tbody id="recordsBody"></tbody>
                </table>
            </div>
            <div id="emptyState" class="empty-state">
                <div style="font-size:3rem;opacity:0.5">üìÖ</div>
                <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</p>
            </div>
        </div>
    </div>

    <!-- Edit Modal -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <h2>‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</h2>
            <input type="hidden" id="editRecordId">
            
            <div class="form-group">
                <label>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</label>
                <input type="date" id="editDate">
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤</label>
                    <input type="time" id="editCheckIn" step="1">
                </div>
                <div class="form-group">
                    <label>‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏≠‡∏Å</label>
                    <input type="time" id="editCheckOut" step="1">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏û‡∏±‡∏Å</label>
                    <input type="time" id="editBreakStart" step="1">
                </div>
                <div class="form-group">
                    <label>‡∏à‡∏ö‡∏û‡∏±‡∏Å</label>
                    <input type="time" id="editBreakEnd" step="1">
                </div>
            </div>

            <div class="form-group">
                <label>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</label>
                <input type="text" id="editNote" placeholder="‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏">
            </div>

            <div style="display:flex;gap:10px;margin-top:20px">
                <button class="btn btn-primary" onclick="saveEdit()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
                <button class="btn btn-secondary" onclick="closeEditModal()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
            </div>
        </div>
    </div>

    <script type="module" src="admin.js"></script>
</body>
</html>