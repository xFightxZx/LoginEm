<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - ‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏á‡∏≤‡∏ô</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .container {
            max-width: 1400px;
        }

        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(30, 41, 59, 0.5);
            backdrop-filter: blur(10px);
            border: 1px solid #334155;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            transition: transform 0.3s, border-color 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            border-color: #22d3ee;
        }

        .stat-card h3 {
            color: #94a3b8;
            font-size: 0.9rem;
            margin-bottom: 15px;
            font-weight: 500;
        }

        .stat-card .number {
            color: #22d3ee;
            font-size: 2.5rem;
            font-weight: bold;
            text-shadow: 0 0 20px rgba(34, 211, 238, 0.3);
        }

        .export-section {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .btn-export {
            background: linear-gradient(to right, #10b981, #059669);
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 600;
            transition: opacity 0.3s, transform 0.2s;
        }

        .btn-export:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }

        .action-column {
            display: flex;
            gap: 8px;
            justify-content: center;
        }

        .btn-action {
            padding: 6px 14px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85rem;
            font-weight: 500;
            transition: opacity 0.3s, transform 0.2s;
        }

        .btn-action:hover {
            opacity: 0.9;
            transform: scale(1.05);
        }

        .btn-edit {
            background: #3b82f6;
            color: white;
        }

        .btn-delete {
            background: #ef4444;
            color: white;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(5px);
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            border: 1px solid #334155;
            border-radius: 20px;
            padding: 35px;
            max-width: 550px;
            width: 90%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            animation: modalSlideIn 0.3s ease-out;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-content h2 {
            margin-bottom: 25px;
            color: #22d3ee;
            font-size: 1.5rem;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }

        .user-info {
            display: inline-flex;
            align-items: center;
            gap: 15px;
            background: rgba(30, 41, 59, 0.5);
            padding: 10px 20px;
            border-radius: 12px;
            border: 1px solid #334155;
        }

        .user-info span:first-child {
            color: #94a3b8;
        }

        .user-info span:last-child {
            color: #22d3ee;
            font-weight: 600;
        }

        .header-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        table {
            font-size: 0.9rem;
        }

        tbody tr:hover {
            background: rgba(34, 211, 238, 0.05);
        }

        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .admin-header {
                flex-direction: column;
                align-items: stretch;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .action-column {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- Admin View -->
    <div id="adminView" class="container">
        <div class="header">
            <h1>üîê Admin - ‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏á‡∏≤‡∏ô</h1>
            <div class="time-display" id="adminTime">00:00:00</div>
            <div class="date-display" id="adminDate">-</div>
            <div style="margin-top:20px">
                <div class="user-info">
                    <span>üë§ ‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ,</span>
                    <span id="adminName">-</span>
                </div>
                <div class="header-actions" style="margin-top:15px;display:flex;justify-content:center;gap:10px">
                    <a href="index.html" class="logout-btn" style="display:inline-block;text-decoration:none">üìã ‡∏´‡∏ô‡πâ‡∏≤‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏ß‡∏•‡∏≤</a>
                    <button onclick="logout()" class="logout-btn">üö™ ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
                </div>
            </div>
        </div>

        <!-- Stats Cards -->
        <div class="stats-grid">
            <div class="stat-card">
                <h3>üë• ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
                <div class="number" id="totalEmployees">0</div>
            </div>
            <div class="stat-card">
                <h3>üìÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</h3>
                <div class="number" id="todayRecords">0</div>
            </div>
            <div class="stat-card">
                <h3>‚è∞ ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏£‡∏ß‡∏° (‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ)</h3>
                <div class="number" id="monthlyHours">0</div>
            </div>
            <div class="stat-card">
                <h3>üèñÔ∏è ‡∏•‡∏≤‡πÉ‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ</h3>
                <div class="number" id="monthlyLeaves">0</div>
            </div>
        </div>

        <!-- Main Panel -->
        <div class="panel">
            <div class="admin-header">
                <div class="panel-header">
                    <span>üìä</span>
                    <h2>‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏ß‡∏•‡∏≤</h2>
                </div>
                <div class="export-section">
                    <button class="btn-export" onclick="exportToCSV()">üì• Export CSV</button>
                </div>
            </div>

            <!-- Filters -->
            <div class="filter-section" style="margin-bottom:25px">
                <label>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô:</label>
                <select id="employeeFilter">
                    <option value="">‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô</option>
                </select>
                <label style="margin-left:15px">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏î‡∏∑‡∏≠‡∏ô:</label>
                <input type="month" id="monthFilter">
                <button onclick="applyFilters()">üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</button>
                <button onclick="clearFilter()">üóëÔ∏è ‡∏•‡πâ‡∏≤‡∏á</button>
                <span class="total-hours">‡∏£‡∏ß‡∏°‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á: <span id="totalHours">0.00 ‡∏ä‡∏°.</span></span>
            </div>

            <!-- Table -->
            <div style="overflow-x:auto;margin-top:20px">
                <table id="recordsTable">
                    <thead>
                        <tr>
                            <th>‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</th>
                            <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
                            <th>‡πÄ‡∏Ç‡πâ‡∏≤</th>
                            <th>‡∏≠‡∏≠‡∏Å</th>
                            <th>‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏û‡∏±‡∏Å</th>
                            <th>‡∏à‡∏ö‡∏û‡∏±‡∏Å</th>
                            <th>‡∏´‡∏±‡∏Å (‡∏ä‡∏°.)</th>
                            <th>‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏£‡∏ß‡∏°</th>
                            <th>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</th>
                            <th style="text-align:center">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                        </tr>
                    </thead>
                    <tbody id="recordsBody"></tbody>
                </table>
            </div>
            <div id="emptyState" class="empty-state">
                <div style="font-size:3rem;opacity:0.5">üìÖ</div>
                <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</p>
            </div>
        </div>
    </div>

    <!-- Edit Modal -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <h2>‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</h2>
            <input type="hidden" id="editRecordId">
            
            <div class="form-group">
                <label>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</label>
                <input type="date" id="editDate">
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤</label>
                    <input type="time" id="editCheckIn" step="1">
                </div>
                <div class="form-group">
                    <label>‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏≠‡∏Å</label>
                    <input type="time" id="editCheckOut" step="1">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏û‡∏±‡∏Å</label>
                    <input type="time" id="editBreakStart" step="1">
                </div>
                <div class="form-group">
                    <label>‡∏à‡∏ö‡∏û‡∏±‡∏Å</label>
                    <input type="time" id="editBreakEnd" step="1">
                </div>
            </div>

            <div class="form-group">
                <label>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</label>
                <input type="text" id="editNote" placeholder="‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏">
            </div>

            <div style="display:flex;gap:10px;margin-top:25px">
                <button class="btn btn-primary" onclick="saveEdit()">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
                <button class="btn btn-secondary" onclick="closeEditModal()">‚ùå ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
            </div>
        </div>
    </div>

    <script type="module" src="admin.js"></script>
</body>
</html>